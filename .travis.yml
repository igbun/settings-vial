language: python
stages:
- lint
- test
before_install:
- pip install codecov
install:
- pip install tox-travis
script: tox
jobs:
  include:
  - python: '3.5'
  - python: '3.6'
  - python: '3.7'
    dist: xenial
    after_success:
    - codecov
  - stage: lint
    python: '3.7'
    script:
    - tox -e lint,isort-check,black-check
deploy:
  provider: pypi
  user: kpn-digital
  skip_cleanup: true
  password:
    secure: EP/Fv4hGRV5jUGcv/bSskanRjyhgtp+ZPy5XIYsqyMeYvhICKcnKoKW4IWSMTupyOOgdqYeVzz5sbbTVmpM7PbgbtlRgZpMfzzMjH+Cgeytp2Wd94TyL0u5dG+aXS5+JdM+XtmBZ2MJe1std3xIXjbdviFjDpPNmYLC6iU/AxrQUiuIYO4ake/wjQTJC/Y3+j7rnTq0Q2AWtOusF0HKdxucyKH/CegcZVoegj27e/4x+yxuUt4l2i87q9IzrVrazioceXOv6TEmedK4c2yJ/M+PYzq0Q/hgkVpsGngLlT7u3rz7z8W+v67kwPUJuO5Pdm2czgxRrklp4Wm3K4LSdKjPSGSbxZ2JhWUBK2bDNmv1fsqTSE7nyu1E1OKxOBliTIdJueu5mtTziZhm0RNAYa1oZN3QTqt6LYzvLyBSi6dBLqqhM8aKCgG0eCJR460ttN8Lc3RmM+AvnVxOvEOU0bqOP5s9Tx56/VggmmsgEZn1RUNHmh77NNrcqNIbKVusIGsVGpXtBbUxNCKNkgHTZZgc6vyQY9jlcvno4ZYV7l0TgpZHIlbdIPzV4wTDqbP4FdrOE3XIImgHVAwUs++kX1HReb08sOQs1ECjbpd3G8Gs4wuX6Tr8bLG6RG+TKG/noIqNvRxIMehHVOUWOgkscfCR+M0fSZ7zWSQ6jJ77tanE=
  on:
    tags: true
